{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { Herramienta } from 'src/app/entidades/herramienta';\nlet HerramientasComponent = class HerramientasComponent {\n  constructor(servicioDeHerramientas, login, miForm) {\n    this.servicioDeHerramientas = servicioDeHerramientas;\n    this.login = login;\n    this.miForm = miForm;\n    this.usuarioAutenticado = false;\n    this.idBack = 0;\n    this.h = 0;\n    this.idFront = 0;\n    this.form = this.miForm.group({\n      nombre: ['', [Validators.required]],\n      progreso: ['', [Validators.required]]\n    });\n  }\n\n  get nombre() {\n    return this.form.get(\"nombre\");\n  }\n\n  get progreso() {\n    return this.form.get(\"progreso\");\n  }\n\n  ngOnInit() {\n    this.login.loginIn.subscribe(data => {\n      this.usuarioAutenticado = true;\n    });\n    this.login.loginOut.subscribe(data => {\n      this.usuarioAutenticado = false;\n    });\n    this.servicioDeHerramientas.obtenerHerramientas().subscribe(data => {\n      console.log(data);\n      this.herramientasList = data;\n    });\n  }\n\n  almacenarId(item) {\n    this.idBack = item.id;\n    this.idFront = this.herramientasList.indexOf(item);\n  }\n\n  guardarDatos() {\n    var _a, _b;\n\n    if (this.form.valid) {\n      let nombre = (_a = this.form.get('nombre')) === null || _a === void 0 ? void 0 : _a.value;\n      let progreso = (_b = this.form.get('progreso')) === null || _b === void 0 ? void 0 : _b.value;\n      let idPersona = 1;\n      let herramientasEditar = new Herramienta(this.idBack, nombre, progreso, idPersona);\n      console.log(herramientasEditar);\n      console.log(\"pasa por aca\");\n      this.servicioDeHerramientas.editarDatos(herramientasEditar).subscribe({\n        next: data => {\n          var _a;\n\n          this.herramientasList[this.idFront] = herramientasEditar;\n          this.form.reset();\n          (_a = document.getElementById(\"cerrarModalHerramientas\")) === null || _a === void 0 ? void 0 : _a.click();\n        },\n        error: error => {\n          alert('No se puedo actualizar el registro. Por favor intente nuevamente mas tarde');\n        }\n      });\n    } else {\n      alert('Hay errores');\n      this.form.markAllAsTouched();\n    }\n  }\n\n  mostrarDatos(item) {\n    var _a, _b;\n\n    this.idBack = item.id;\n    this.idFront = this.herramientasList.indexOf(item);\n    (_a = this.form.get('nombre')) === null || _a === void 0 ? void 0 : _a.setValue(item.nombre);\n    (_b = this.form.get('progreso')) === null || _b === void 0 ? void 0 : _b.setValue(item.progreso);\n    this.almacenarId(item);\n  }\n\n  eliminarHerramienta(item) {\n    if (confirm(\"Â¿Seguro que desea borrar el item?\")) {\n      //alert(item.id);\n      this.servicioDeHerramientas.eliminarHerramienta(item.id).subscribe(data => {\n        // this.herramientasList.splice(this.idBack,1);\n        console.log(this.herramientasList);\n        this.ngOnInit();\n      }, error => {\n        alert(\"Se produjo  un error, consulte al   administrador\");\n      });\n    }\n  }\n\n  agregarHerramienta() {\n    var _a, _b, _c;\n\n    let id = this.herramientasList.length + 1;\n    let nombre = (_a = this.form.get('nombre')) === null || _a === void 0 ? void 0 : _a.value;\n    let progreso = (_b = this.form.get('progreso')) === null || _b === void 0 ? void 0 : _b.value;\n    let idPersona = 1;\n    let nuevaHerramienta = new Herramienta(id, nombre, progreso, idPersona);\n    alert(\"agregar nuevo item\" + id);\n    this.servicioDeHerramientas.nuevaHerramienta(nuevaHerramienta).subscribe(data => {\n      this.herramientasList[id] = nuevaHerramienta;\n      this.form.reset();\n      this.ngOnInit();\n    });\n    (_c = document.getElementById(\"cerrarModalHerramientaNueva\")) === null || _c === void 0 ? void 0 : _c.click();\n  }\n\n};\nHerramientasComponent = __decorate([Component({\n  selector: 'app-herramientas',\n  templateUrl: './herramientas.component.html',\n  styleUrls: ['./herramientas.component.css']\n})], HerramientasComponent);\nexport { HerramientasComponent };","map":null,"metadata":{},"sourceType":"module"}